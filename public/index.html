<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
<meta id="theme-color-meta" name="theme-color" content="#1F2937"/>
<link rel="apple-touch-icon" sizes="180x180" href="icon-180x180.png">
<link rel="apple-touch-icon" href="icon-192x192.png">
<link rel="manifest" href="manifest.json">
<title>Foco Total</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
<link id="favicon" rel="icon" href="icon-192x192.png" type="image/png">
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
<style>
:root {
    --color-primary-rgb: 59, 130, 246;
    --color-primary-focus-rgb: 37, 99, 235;
    --color-primary-darker-rgb: 29, 78, 216;
    --color-primary-light-rgb: 96, 165, 250;
    --color-bg-main: radial-gradient(circle at center, #1a202c 0%, #000000 70%);
    --color-bg-shell: #1F2937;
    --color-bg-panel: #111827;
    --color-bg-input: #374151;
    --color-bg-input-light: #4B5563;
    --color-text-base: #D1D5DB;
    --color-text-header: #FFFFFF;
    --color-text-muted: #9CA3AF;
    --color-text-placeholder: #6B7280;
    --color-text-timer: #FFFFFF;
    --color-border-subtle-rgb: 255, 255, 255;
    --color-xp-bar: 255, 223, 0;
    --color-streak-fire: 255, 107, 0;
    --color-coin: 255, 193, 7;
    --color-break-short: #34D399;
    --color-break-long: #A78BFA;
}
html { scroll-behavior: smooth; }
body { font-family: 'Inter', sans-serif; background: var(--color-bg-main); color: var(--color-text-base); display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 1rem; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
.device-shell { background-color: var(--color-bg-shell); border: 1px solid rgba(var(--color-border-subtle-rgb), 0.05); }
.timer-panel, .task-input-panel, #focus-method-toggle, #color-palette-selector { background-color: var(--color-bg-panel); }
.task-item, .stats-item, .achievement-item, .dashboard-card, .mission-item { background-color: var(--color-bg-input); }
h1, h2, h3 { color: var(--color-text-header); }
.text-muted { color: var(--color-text-muted); }
input[type="text"], input[type="number"] { background-color: var(--color-bg-input-light); color: var(--color-text-header); }
input::placeholder { color: var(--color-text-placeholder); }
#timer-display { color: var(--color-text-timer); text-shadow: 0 0 10px rgba(var(--color-border-subtle-rgb), 0.15); }
.text-primary-light { color: rgb(var(--color-primary-light-rgb)); }
.bg-primary-focus { background-color: rgb(var(--color-primary-focus-rgb)); }
.hover\:bg-primary-darker:hover { background-color: rgb(var(--color-primary-darker-rgb)); }
.border-primary { border-color: rgb(var(--color-primary-rgb)); }
.task-item.selected { background-color: var(--color-bg-input-light); border-color: rgb(var(--color-primary-rgb)); box-shadow: 0 0 12px rgba(var(--color-primary-rgb), 0.7); }
.modal-border-primary { border-color: rgb(var(--color-primary-rgb)); box-shadow: 0 0 20px rgba(var(--color-primary-rgb), 0.5); }
#xp-bar-fill, .mission-progress-bar { background-color: rgb(var(--color-xp-bar)); }
.text-streak { color: rgb(var(--color-streak-fire)); }
.text-coin { color: rgb(var(--color-coin)); }
.device-shell { border-radius: 2.5rem; padding: 1.5rem; display: flex; flex-direction: column; width: 100%; max-width: 420px; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(10, 10, 10, 0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); }
.modal-overlay.visible { opacity: 1; visibility: visible; }
.modal-content { background-color: var(--color-bg-shell); padding: 2rem; border-radius: 1rem; border: 1px solid; transform: scale(0.9); transition: transform 0.3s; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto; }
.modal-overlay.visible .modal-content { transform: scale(1); }
.dashboard-tab.active { background-color: rgb(var(--color-primary-focus-rgb)); color: white; }
.hidden { display: none; }
#app-container.blurred { filter: blur(8px); transform: scale(0.98); pointer-events: none; user-select: none; transition: filter 0.3s ease-in-out, transform 0.3s ease-in-out; }
#app-container { transition: filter 0.3s ease-in-out, transform 0.3s ease-in-out; }
</style>
</head>
<body>

<!-- ... (todo o seu HTML do app e do login continua aqui) ... -->

<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
<!-- CORREÇÃO FINAL: Adiciona o script do firebase_auth.js ANTES do main.js -->
<script type="module" src="firebase_auth.js"></script>
<script type="module" src="main.js"></script>
</body>
</html>
