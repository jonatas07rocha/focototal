<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
<meta id="theme-color-meta" name="theme-color" content="#1F2937"/>
<link rel="apple-touch-icon" sizes="180x180" href="icon-180x180.png">
<link rel="apple-touch-icon" href="icon-192x192.png">
<link rel="manifest" href="manifest.json">
<title>Foco Total</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
<link id="favicon" rel="icon" href="icon-192x192.png" type="image/png">
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
<style>
:root {
    --color-primary-rgb: 59, 130, 246;
    --color-primary-focus-rgb: 37, 99, 235;
    --color-primary-darker-rgb: 29, 78, 216;
    --color-primary-light-rgb: 96, 165, 250;
    --color-bg-main: radial-gradient(circle at center, #1a202c 0%, #000000 70%);
    --color-bg-shell: #1F2937;
    --color-bg-panel: #111827;
    --color-bg-input: #374151;
    --color-bg-input-light: #4B5563;
    --color-text-base: #D1D5DB;
    --color-text-header: #FFFFFF;
    --color-text-muted: #9CA3AF;
    --color-text-placeholder: #6B7280;
    --color-text-timer: #FFFFFF;
    --color-border-subtle-rgb: 255, 255, 255;
    --color-xp-bar: 255, 223, 0;
    --color-streak-fire: 255, 107, 0;
    --color-coin: 255, 193, 7;
    --color-break-short: #34D399;
    --color-break-long: #A78BFA;
}
html { scroll-behavior: smooth; }
body { font-family: 'Inter', sans-serif; background: var(--color-bg-main); color: var(--color-text-base); display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 1rem; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
.device-shell { background-color: var(--color-bg-shell); border: 1px solid rgba(var(--color-border-subtle-rgb), 0.05); }
.timer-panel, .task-input-panel, #focus-method-toggle, #color-palette-selector { background-color: var(--color-bg-panel); }
.task-item, .stats-item, .achievement-item, .dashboard-card, .mission-item { background-color: var(--color-bg-input); }
h1, h2, h3 { color: var(--color-text-header); }
.text-muted { color: var(--color-text-muted); }
input[type="text"], input[type="number"] { background-color: var(--color-bg-input-light); color: var(--color-text-header); }
input::placeholder { color: var(--color-text-placeholder); }
#timer-display { color: var(--color-text-timer); text-shadow: 0 0 10px rgba(var(--color-border-subtle-rgb), 0.15); }
.text-primary-light { color: rgb(var(--color-primary-light-rgb)); }
.bg-primary-focus { background-color: rgb(var(--color-primary-focus-rgb)); }
.hover\:bg-primary-darker:hover { background-color: rgb(var(--color-primary-darker-rgb)); }
.border-primary { border-color: rgb(var(--color-primary-rgb)); }
.task-item.selected { background-color: var(--color-bg-input-light); border-color: rgb(var(--color-primary-rgb)); box-shadow: 0 0 12px rgba(var(--color-primary-rgb), 0.7); }
.modal-border-primary { border-color: rgb(var(--color-primary-rgb)); box-shadow: 0 0 20px rgba(var(--color-primary-rgb), 0.5); }
#xp-bar-fill, .mission-progress-bar { background-color: rgb(var(--color-xp-bar)); }
.text-streak { color: rgb(var(--color-streak-fire)); }
.text-coin { color: rgb(var(--color-coin)); }
.device-shell { border-radius: 2.5rem; padding: 1.5rem; display: flex; flex-direction: column; width: 100%; max-width: 420px; box-shadow: 0 10px 30px rgba(0,0,0,0.4); }
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(10, 10, 10, 0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); }
.modal-overlay.visible { opacity: 1; visibility: visible; }
.modal-content { background-color: var(--color-bg-shell); padding: 2rem; border-radius: 1rem; border: 1px solid; transform: scale(0.9); transition: transform 0.3s; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto; }
.modal-overlay.visible .modal-content { transform: scale(1); }
.dashboard-tab.active { background-color: rgb(var(--color-primary-focus-rgb)); color: white; }
.hidden { display: none; }

#app-container.blurred {
    filter: blur(8px);
    transform: scale(0.98);
    pointer-events: none;
    user-select: none;
    transition: filter 0.3s ease-in-out, transform 0.3s ease-in-out;
}
#app-container {
    transition: filter 0.3s ease-in-out, transform 0.3s ease-in-out;
}
</style>
</head>
<body>

<div id="app-container" class="blurred">
    <div id="device-shell" class="device-shell">
        <header class="flex justify-between items-center mb-2 flex-shrink-0">
            <div class="flex items-center space-x-3">
                <div class="flex items-center space-x-1" title="Moedas"><i data-lucide="circle-dollar-sign" class="w-5 h-5 text-coin"></i><span id="coins-display" class="font-bold text-sm">0</span></div>
                <div class="flex items-center space-x-1" title="Sequência de Foco Diário"><i data-lucide="flame" class="w-5 h-5 text-streak"></i><span id="streak-display" class="font-bold text-sm">0</span></div>
            </div>
            <div id="user-profile" class="hidden items-center space-x-2">
                <img id="user-avatar" src="" alt="Avatar do usuário" class="w-8 h-8 rounded-full">
                <button id="logout-btn" class="text-muted hover:text-white p-2 rounded-full transition-colors" title="Sair" aria-label="Sair"><i data-lucide="log-out" class="w-5 h-5"></i></button>
            </div>
            <button id="help-btn" class="text-muted hover:text-white p-2 rounded-full transition-colors" title="Ajuda" aria-label="Ajuda"><i data-lucide="help-circle" class="w-6 h-6"></i></button>
        </header>
        <!-- O resto do seu app continua aqui... -->
    </div>
</div>

<div id="login-overlay" class="modal-overlay visible">
    <div class="modal-content text-center">
        <h1 class="text-3xl font-bold mb-2">Bem-vindo ao Foco Total</h1>
        <p class="text-muted mb-6">Faça login para salvar e sincronizar seu progresso.</p>
        <!-- CORREÇÃO: Altera as classes de estilo para um botão branco com texto escuro -->
        <button id="login-btn" class="bg-white hover:bg-gray-200 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors flex items-center mx-auto border border-gray-300 shadow-sm">
            <svg class="w-6 h-6 mr-3" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path><path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path><path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.222,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"></path><path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.574l6.19,5.238C42.021,35.596,44,30.138,44,24C44,22.659,43.862,21.35,43.611,20.083z"></path></svg>
            Entrar com Google
        </button>
    </div>
</div>

<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
<script type="module" src="main.js"></script>
</body>
</html>
